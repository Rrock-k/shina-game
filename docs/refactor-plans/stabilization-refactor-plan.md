# –ü–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞: –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä–æ–≤–æ–π –ª–æ–≥–∏–∫–∏ –∏ —Ç–æ—á–Ω–æ—Å—Ç—å –ø—Ä–∏–±—ã—Ç–∏—è

## üéØ –¶–µ–ª—å
–£—Å—Ç—Ä–∞–Ω–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é –∏–≥—Ä—ã: "–ø—Ä–æ—Å–∫–∞–∫–∏–≤–∞–Ω–∏–µ" (overshooting) –ø—É–Ω–∫—Ç–æ–≤ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –≤—Ä–µ–º—è –ø—Ä–µ–±—ã–≤–∞–Ω–∏—è –≤ –ª–æ–∫–∞—Ü–∏—è—Ö. –¶–µ–ª—å ‚Äî —Å–¥–µ–ª–∞—Ç—å –∏–≥—Ä–æ–≤—É—é —Å–∏–º—É–ª—è—Ü–∏—é –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–π –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π –Ω–∞ –ª—é–±–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏ (x1, x2, x5), –æ–±–µ—Å–ø–µ—á–∏–≤ –Ω–∞–¥–µ–∂–Ω–æ–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–µ –∏–≥—Ä–æ–≤–æ–π –ª–æ–≥–∏–∫–∏ –ø—Ä–∏–±—ã—Ç–∏—è.

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- **–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–≤–∏–∂–µ–Ω–∏—è**: `src/systems/MovementController.js`
- **–ì–ª–∞–≤–Ω—ã–π –∫–ª–∞—Å—Å –∏–≥—Ä—ã**: `src/game/Game.js`
- **–ú–µ–Ω–µ–¥–∂–µ—Ä –∂—É—Ä–Ω–∞–ª–∞**: `src/game/JournalManager.js`
- **–ú–µ–Ω–µ–¥–∂–µ—Ä —Å–æ—Å—Ç–æ—è–Ω–∏—è**: `src/game/StateManager.js`

## ‚úÖ –≠—Ç–∞–ø 1: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ "–ø—Ä–æ—Å–∫–∞–∫–∏–≤–∞–Ω–∏—è" (Overshooting)

### 1.1 –£–ª—É—á—à–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–µ–≥–º–µ–Ω—Ç–∞ –ø—É—Ç–∏ ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–ó–∞–¥–∞—á–∞**: –ò–∑–º–µ–Ω–∏—Ç—å –ª–æ–≥–∏–∫—É —Ç–∞–∫, —á—Ç–æ–±—ã –∏–∑–±—ã—Ç–æ—á–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å –¥–≤–∏–∂–µ–Ω–∏—è –≤ –æ–¥–Ω–æ–º –∫–∞–¥—Ä–µ –Ω–µ —Ç–µ—Ä—è–ª—Å—è, –∞ –ø–µ—Ä–µ–Ω–æ—Å–∏–ª—Å—è –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —Å–µ–≥–º–µ–Ω—Ç. –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –æ–±—â–∞—è –¥–∏—Å—Ç–∞–Ω—Ü–∏—è, –ø—Ä–æ–π–¥–µ–Ω–Ω–∞—è –º–∞—à–∏–Ω–æ–π, –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π.

**–§–∞–π–ª—ã**: `src/systems/MovementController.js`

**–î–µ—Ç–∞–ª–∏**:
- –í –º–µ—Ç–æ–¥–µ `update()`, –≤–Ω—É—Ç—Ä–∏ —É—Å–ª–æ–≤–∏—è `if (this.car.progress >= segLen)`, –≤—ã—á–∏—Å–ª–∏—Ç—å "–∏–∑–±—ã—Ç–æ—á–Ω—ã–π" –ø—Ä–æ–≥—Ä–µ—Å—Å: `const remainingProgress = this.car.progress - segLen;`
- –ü–æ—Å–ª–µ –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Å–µ–≥–º–µ–Ω—Ç—É (`this.car.currentSegment++`), —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞—á–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å –Ω–µ –≤ 0, –∞ –≤ `this.car.progress = remainingProgress;`

**–ü—Ä–æ–≤–µ—Ä–∫–∞**: –ú–∞—à–∏–Ω–∞ –¥–æ–ª–∂–Ω–∞ –¥–≤–∏–≥–∞—Ç—å—Å—è –±–æ–ª–µ–µ –ø–ª–∞–≤–Ω–æ –∏ —Ç–æ—á–Ω–æ, –æ—Å–æ–±–µ–Ω–Ω–æ –Ω–∞ –≤—ã—Å–æ–∫–∏—Ö —Å–∫–æ—Ä–æ—Å—Ç—è—Ö. –û–±—â–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –ø–µ—Ä–µ–¥–≤–∏–∂–µ–Ω–∏—è –ø–æ –º–∞—Ä—à—Ä—É—Ç—É —Å—Ç–∞–Ω–µ—Ç –±–æ–ª–µ–µ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–π.

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–æ –≤ —Å—Ç—Ä–æ–∫–∞—Ö 176-189 MovementController.js

### 1.2 –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–∑–æ–≤ –ª–æ–≥–∏–∫–∏ –ø—Ä–∏–±—ã—Ç–∏—è ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–ó–∞–¥–∞—á–∞**: –û–±–µ—Å–ø–µ—á–∏—Ç—å, —á—Ç–æ–±—ã –ª–æ–≥–∏–∫–∞ –ø—Ä–∏–±—ã—Ç–∏—è (`checkArrival`) –≤—ã–∑—ã–≤–∞–ª–∞—Å—å –≤ —Ç–æ–º –∂–µ –∫–∞–¥—Ä–µ, –∫–æ–≥–¥–∞ –º–∞—à–∏–Ω–∞ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç –∫–æ–Ω—Ü–∞ –ø—É—Ç–∏, –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω–∞ –µ–≥–æ "–ø—Ä–æ—Å–∫–∞–∫–∏–≤–∞–µ—Ç".

**–§–∞–π–ª—ã**: `src/systems/MovementController.js`

**–î–µ—Ç–∞–ª–∏**:
- –í –º–µ—Ç–æ–¥–µ `update()`, –≤–Ω—É—Ç—Ä–∏ –±–ª–æ–∫–∞ `if (this.car.currentSegment >= this.car.path.length - 1)`, –∫–æ—Ç–æ—Ä—ã–π —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –∫–æ–Ω—Ü–∞ –ø—É—Ç–∏, –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –≤—ã–∑–≤–∞—Ç—å `checkArrival()`
- –ü–µ—Ä–µ–¥–∞—Ç—å `checkArrival` –∫–∞–∫ callback –≤ –º–µ—Ç–æ–¥ `update` –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –¥–≤–∏–∂–µ–Ω–∏—è, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø—Ä—è–º–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ –∫–æ–Ω—Ü–µ –º–µ—Ç–æ–¥–∞ `update()` –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ `checkArrival` –¥–∞–∂–µ –ø—Ä–∏ "–ø—Ä–æ—Å–∫–∞–∫–∏–≤–∞–Ω–∏–∏" (—Å—Ç—Ä–æ–∫–∏ 215-220)

**–ü—Ä–æ–≤–µ—Ä–∫–∞**: –í –∂—É—Ä–Ω–∞–ª–µ –ø–æ–µ–∑–¥–æ–∫ ("–ñ—É—Ä–Ω–∞–ª –ø–æ–µ–∑–¥–æ–∫") —Ç–µ–ø–µ—Ä—å —Å—Ç–∞–±–∏–ª—å–Ω–æ –ø–æ—è–≤–ª—è—é—Ç—Å—è –∑–∞–ø–∏—Å–∏ –æ –ø—Ä–∏–±—ã—Ç–∏–∏ –≤ "–ë–æ–∫—Å" –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏ x1 –∏ –≤ "–ò–Ω—Å—Ç–∏—Ç—É—Ç" –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏ x5. –®–∏–Ω–∞ –≤—Å–µ–≥–¥–∞ –≤—ã—Ö–æ–¥–∏—Ç –∏–∑ –º–∞—à–∏–Ω—ã –≤ –ø—É–Ω–∫—Ç–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è.

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–æ –≤ —Å—Ç—Ä–æ–∫–∞—Ö 215-220 MovementController.js

## ‚úÖ –≠—Ç–∞–ø 2: –û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è

### 2.1 –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è –ª–æ–≥–∏–∫–∏ –ø—Ä–∏–±—ã—Ç–∏—è ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–ó–∞–¥–∞—á–∞**: –°–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –ø—Ä–∏–±—ã—Ç–∏–µ–º (–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–∞—à–∏–Ω—ã, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∂—É—Ä–Ω–∞–ª–∞, –∑–∞–ø—É—Å–∫ —Ç–∞–π–º–µ—Ä–∞), –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ, —á—Ç–æ–±—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ.

**–§–∞–π–ª—ã**: `src/game/Game.js`

**–î–µ—Ç–∞–ª–∏**:
- –í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ `checkArrival()`
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—ã–∑–æ–≤—ã `this.carEntity.setAtDestination(true)`, `this.carEntity.setStayTimer(...)` –∏ `this.journalManager.endTrip(...)` –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –≤–Ω—É—Ç—Ä–∏ —ç—Ç–æ–≥–æ –º–µ—Ç–æ–¥–∞ –±–µ–∑ –ª–∏—à–Ω–∏—Ö —É—Å–ª–æ–≤–∏–π

**–ü—Ä–æ–≤–µ—Ä–∫–∞**: –ü—Ä–∏ –ø—Ä–∏–±—ã—Ç–∏–∏ –≤ –ª—é–±—É—é –ª–æ–∫–∞—Ü–∏—é, –≤ –∂—É—Ä–Ω–∞–ª–µ —Å—Ä–∞–∑—É –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å, –∞ –º–∞—à–∏–Ω–∞ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ "–æ–∂–∏–¥–∞–Ω–∏—è". –ù–∏–∫–∞–∫–∏—Ö –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –∏–ª–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π –Ω–µ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç.

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å –º–µ—Ç–æ–¥–∞ `checkArrival()` –≤ —Å—Ç—Ä–æ–∫–∞—Ö 464-506 Game.js
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–ª–∏—á–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –£–±—Ä–∞–Ω–æ —É—Å–ª–æ–≤–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–≥–ª–æ –ø—Ä–∏–≤–æ–¥–∏—Ç—å –∫ –ø—Ä–æ–ø—É—Å–∫—É –≤—ã–∑–æ–≤–æ–≤
- –í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–∏–±—ã—Ç–∏—è —Ç–µ–ø–µ—Ä—å –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –∏ –∞—Ç–æ–º–∞—Ä–Ω–æ
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### 2.2 –£—Ç–æ—á–Ω–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ —Ç–∞–π–º–µ—Ä–∞ –ø—Ä–µ–±—ã–≤–∞–Ω–∏—è ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–ó–∞–¥–∞—á–∞**: –£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏–∫—É —Ä–∞—Å—á–µ—Ç–∞ —Ç–∞–π–º–µ—Ä–∞, —á—Ç–æ–±—ã –æ–Ω–∞ –±—ã–ª–∞ –Ω–µ–≤–æ—Å–ø—Ä–∏–∏–º—á–∏–≤–∞ –∫ —Ñ–ª—É–∫—Ç—É–∞—Ü–∏—è–º delta –∏ –≤–æ–∑–º–æ–∂–Ω—ã–º –ø—Ä–æ–ø—É—Å–∫–∞–º –∫–∞–¥—Ä–æ–≤.

**–§–∞–π–ª—ã**: `src/game/StateManager.js`, `src/game/Game.js`

**–î–µ—Ç–∞–ª–∏**:
- –í `StateManager` –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä `stayStartTimeAbs`, –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∞–±—Å–æ–ª—é—Ç–Ω–æ–≥–æ –∏–≥—Ä–æ–≤–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞—á–∞–ª–∞ –ø—Ä–µ–±—ã–≤–∞–Ω–∏—è (–∏–∑ `timeManager`)
- –ü—Ä–∏ –≤—ã–∑–æ–≤–µ `checkArrival()` –≤ `Game.js`, —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Ç–µ–∫—É—â–µ–µ –∏–≥—Ä–æ–≤–æ–µ –≤—Ä–µ–º—è –≤ `stayStartTimeAbs`
- –í –º–µ—Ç–æ–¥–µ `updateStayTimer()` –≤ `StateManager` —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å –ø—Ä–æ—à–µ–¥—à–µ–µ –≤—Ä–µ–º—è, –≤—ã—á–∏—Ç–∞—è `stayStartTimeAbs` –∏–∑ —Ç–µ–∫—É—â–µ–≥–æ –∏–≥—Ä–æ–≤–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏. –≠—Ç–æ —Å–¥–µ–ª–∞–µ—Ç —Ä–∞—Å—á–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º –æ—Ç delta

**–ü—Ä–æ–≤–µ—Ä–∫–∞**: –®–∏–Ω–∞ —Ç–µ–ø–µ—Ä—å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ª–æ–∫–∞—Ü–∏—è—Ö —Ä–æ–≤–Ω–æ —Å—Ç–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏, —Å–∫–æ–ª—å–∫–æ —É–∫–∞–∑–∞–Ω–æ –≤ `ROUTE_SCHEDULE` (–Ω–∞–ø—Ä–∏–º–µ—Ä, 5 —á–∞—Å–æ–≤ –Ω–∞ –†–∞–±–æ—Ç–µ). –≠—Ç–æ –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω–∞–±–ª—é–¥–∞—è –∑–∞ –∏–≥—Ä–æ–≤—ã–º–∏ —á–∞—Å–∞–º–∏.

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã:
- –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–≤–æ–π—Å—Ç–≤–æ `stayStartTimeAbs` –≤ StateManager (—Å—Ç—Ä–æ–∫–∏ 22, 120-137)
- –û–±–Ω–æ–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `checkArrival()` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞—á–∞–ª–∞ –ø—Ä–µ–±—ã–≤–∞–Ω–∏—è (—Å—Ç—Ä–æ–∫–∏ 501-504 Game.js)
- –ü–µ—Ä–µ–ø–∏—Å–∞–Ω –º–µ—Ç–æ–¥ `updateStayTimer()` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∞–±—Å–æ–ª—é—Ç–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ (—Å—Ç—Ä–æ–∫–∏ 161-191 StateManager.js)
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—á–∏—Å—Ç–∫–∞ `stayStartTimeAbs` –ø—Ä–∏ –Ω–∞—á–∞–ª–µ –Ω–æ–≤–æ–π –ø–æ–µ–∑–¥–∫–∏ (—Å—Ç—Ä–æ–∫–∞ 444 Game.js)
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥ `_updateStayTimerLegacy()`

## üìà –ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

- [x] –®–∏–Ω–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ –≤—ã—Ö–æ–¥–∏—Ç –∏–∑ –º–∞—à–∏–Ω—ã –≤–æ –≤—Å–µ—Ö –ª–æ–∫–∞—Ü–∏—è—Ö –Ω–∞ –≤—Å–µ—Ö —Å–∫–æ—Ä–æ—Å—Ç—è—Ö (x1, x2, x5) ‚úÖ
- [x] "–ñ—É—Ä–Ω–∞–ª –ø–æ–µ–∑–¥–æ–∫" –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏ –±–µ–∑ –ø—Ä–æ–ø—É—Å–∫–æ–≤ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤—Å–µ —ç—Ç–∞–ø—ã –º–∞—Ä—à—Ä—É—Ç–∞ ‚úÖ
- [x] –í—Ä–µ–º—è, –∫–æ—Ç–æ—Ä–æ–µ –®–∏–Ω–∞ –ø—Ä–æ–≤–æ–¥–∏—Ç –≤ –∫–∞–∂–¥–æ–π –ª–æ–∫–∞—Ü–∏–∏, —Ç–æ—á–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—é `stayHours` –≤ `ROUTE_SCHEDULE` ‚úÖ
- [x] –û–±—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å–∏–º—É–ª—è—Ü–∏–∏ —Å—Ç–∞–ª–æ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º –∏ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏–≥—Ä—ã ‚úÖ

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è

**MovementController.js** (—Å—Ç—Ä–æ–∫–∏ 169-202):
- –¢–µ–∫—É—â–∞—è –ª–æ–≥–∏–∫–∞ —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ "–ø—Ä–æ—Å–∫–∞–∫–∏–≤–∞–Ω–∏—è" (—Å—Ç—Ä–æ–∫–∏ 176-178)
- –û–¥–Ω–∞–∫–æ –∏–∑–±—ã—Ç–æ—á–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å —Ç–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Å–µ–≥–º–µ–Ω—Ç—É
- –ù—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–±—ã—Ç–æ—á–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –µ–≥–æ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Å–µ–≥–º–µ–Ω—Ç—É

**Game.js** (—Å—Ç—Ä–æ–∫–∏ 463-495):
- –ú–µ—Ç–æ–¥ `checkArrival()` —É–∂–µ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω
- –õ–æ–≥–∏–∫–∞ –ø—Ä–∏–±—ã—Ç–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞—Ç–æ–º–∞—Ä–Ω–æ
- –í–æ–∑–º–æ–∂–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π –≤—ã–∑–æ–≤–æ–≤

**StateManager.js** (—Å—Ç—Ä–æ–∫–∏ 136-168):
- –¢–µ–∫—É—â–∞—è –ª–æ–≥–∏–∫–∞ `updateStayTimer()` –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ delta –≤—Ä–µ–º–µ–Ω–∏
- –ú–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ–π –ø—Ä–∏ –ø—Ä–æ–ø—É—Å–∫–∞—Ö –∫–∞–¥—Ä–æ–≤ –∏–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–∫–æ—Ä–æ—Å—Ç–∏

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

1. **–í—ã—Å–æ–∫–∏–π**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ "–ø—Ä–æ—Å–∫–∞–∫–∏–≤–∞–Ω–∏—è" –≤ MovementController
2. **–í—ã—Å–æ–∫–∏–π**: –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–∑–æ–≤ –ª–æ–≥–∏–∫–∏ –ø—Ä–∏–±—ã—Ç–∏—è
3. **–°—Ä–µ–¥–Ω–∏–π**: –£–ª—É—á—à–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ —Ç–∞–π–º–µ—Ä–∞ –ø—Ä–µ–±—ã–≤–∞–Ω–∏—è
4. **–ù–∏–∑–∫–∏–π**: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

## üöÄ –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–æ–≥–æ –ø–ª–∞–Ω–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:

1. **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**: –ò–≥—Ä–∞ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤–æ –Ω–∞–¥–µ–∂–Ω–æ –Ω–∞ –≤—Å–µ—Ö —Å–∫–æ—Ä–æ—Å—Ç—è—Ö
2. **–¢–æ—á–Ω–æ—Å—Ç—å**: –í—Ä–µ–º—è –ø—Ä–µ–±—ã–≤–∞–Ω–∏—è –≤ –ª–æ–∫–∞—Ü–∏—è—Ö –±—É–¥–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º
3. **–ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å**: –õ–æ–≥–∏–∫–∞ –ø—Ä–∏–±—ã—Ç–∏—è –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ
4. **–ö–∞—á–µ—Å—Ç–≤–æ**: –£–ª—É—á—à–∏—Ç—Å—è –æ–±—â–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∏–≥—Ä–æ–≤–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –≠—Ç–æ—Ç –ø–ª–∞–Ω –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ –∞–Ω–∞–ª–∏–∑–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞ –∏ –≤—ã—è–≤–ª–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö
- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Å–∫–æ—Ä–æ—Å—Ç—è—Ö –∏–≥—Ä—ã
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω—è—Ç—å —ç—Ç–∞–ø—ã –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –ª—É—á—à–µ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è –∫–∞—á–µ—Å—Ç–≤–∞
- –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞ —Å–ª–µ–¥—É–µ—Ç –ø—Ä–æ–≤–æ–¥–∏—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 2024-12-19  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ó–ê–í–ï–†–®–ï–ù  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –í—ã—Å–æ–∫–∏–π

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–ª–∞–Ω —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤—ã–ø–æ–ª–Ω–µ–Ω! –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é –∏–≥—Ä—ã —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã:

- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ "–ø—Ä–æ—Å–∫–∞–∫–∏–≤–∞–Ω–∏–µ" –ø—É–Ω–∫—Ç–æ–≤ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
- ‚úÖ –û–±–µ—Å–ø–µ—á–µ–Ω–∞ —Å—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –Ω–∞ –≤—Å–µ—Ö —Å–∫–æ—Ä–æ—Å—Ç—è—Ö (x1, x2, x5)
- ‚úÖ –¢–æ—á–Ω–æ–µ –≤—Ä–µ–º—è –ø—Ä–µ–±—ã–≤–∞–Ω–∏—è –≤ –ª–æ–∫–∞—Ü–∏—è—Ö
- ‚úÖ –ù–∞–¥–µ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–∏–±—ã—Ç–∏—è

**–ì–æ—Ç–æ–≤–æ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —ç—Ç–∞–ø—É —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞!** üöÄ

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

–í—Å–µ —ç—Ç–∞–ø—ã –ø–ª–∞–Ω–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã:

1. **–≠—Ç–∞–ø 1.1** ‚úÖ - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ "–ø—Ä–æ—Å–∫–∞–∫–∏–≤–∞–Ω–∏—è" –≤ MovementController
2. **–≠—Ç–∞–ø 1.2** ‚úÖ - –û–±–µ—Å–ø–µ—á–µ–Ω –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–∑–æ–≤ –ª–æ–≥–∏–∫–∏ –ø—Ä–∏–±—ã—Ç–∏—è  
3. **–≠—Ç–∞–ø 2.1** ‚úÖ - –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø—Ä–∏–±—ã—Ç–∏—è –≤ Game.js
4. **–≠—Ç–∞–ø 2.2** ‚úÖ - –£–ª—É—á—à–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Ç–∞–π–º–µ—Ä–∞ –ø—Ä–µ–±—ã–≤–∞–Ω–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∞–±—Å–æ–ª—é—Ç–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏

**–ö–ª—é—á–µ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:**
- –¢–∞–π–º–µ—Ä –ø—Ä–µ–±—ã–≤–∞–Ω–∏—è —Ç–µ–ø–µ—Ä—å –Ω–µ–≤–æ—Å–ø—Ä–∏–∏–º—á–∏–≤ –∫ —Ñ–ª—É–∫—Ç—É–∞—Ü–∏—è–º delta –∏ –ø—Ä–æ–ø—É—Å–∫–∞–º –∫–∞–¥—Ä–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞–±—Å–æ–ª—é—Ç–Ω–æ–≥–æ –∏–≥—Ä–æ–≤–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –≤–º–µ—Å—Ç–æ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ —Å—Ç–∞—Ä–æ–π –ª–æ–≥–∏–∫–æ–π
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
