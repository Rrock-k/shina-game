# –ö–∞—Ä—Ç–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

## üéØ –¶–µ–ª—å
–°–æ–∑–¥–∞—Ç—å –∫–∞—Ä—Ç—É –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–µ–∂–¥—É —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –≤ `main.js`, —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –∏—Ö –ø–µ—Ä–µ–Ω–æ—Å–∞ –≤ –∫–ª–∞—Å—Å `Game.js`.

## üìä –ê–Ω–∞–ª–∏–∑ —Ñ—É–Ω–∫—Ü–∏–π

### üî¥ –ö—Ä–∏—Ç–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (—Ç—Ä–µ–±—É—é—Ç –ø–µ—Ä–µ–Ω–æ—Å–∞ –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å)

#### 1. `updateStayTimer()` - **–ü–†–û–°–¢–ê–Ø** ‚≠ê
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: `game.timeManager`, `carEntity`
- **–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑**: `Game.update()` (—á–µ—Ä–µ–∑ `updateCar()`)
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –í–´–°–û–ö–ò–ô (—Å–∞–º–∞—è –ø—Ä–æ—Å—Ç–∞—è)
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤–∞ –∫ –ø–µ—Ä–µ–Ω–æ—Å—É

#### 2. `saveCarStateForNextDestination()` - **–°–†–ï–î–ù–Ø–Ø** ‚≠ê‚≠ê
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: `CONFIG.ROUTE_SCHEDULE`, `getDestinationCenter()`, `pathBuilder`, `carRenderer`, `car`
- **–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑**: `checkArrival()`
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –í–´–°–û–ö–ò–ô (–Ω–µ–∑–∞–≤–∏—Å–∏–º–∞—è)
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤–∞ –∫ –ø–µ—Ä–µ–Ω–æ—Å—É

#### 3. `showBuildingAvatar(locationKey)` - **–°–†–ï–î–ù–Ø–Ø** ‚≠ê‚≠ê
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: `getDestinationCenter()`, `carRenderer`, `zoneGeometry`, `decorLayer`, `buildingAvatars`
- **–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑**: `checkArrival()`
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –°–†–ï–î–ù–ò–ô
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤–∞ –∫ –ø–µ—Ä–µ–Ω–æ—Å—É

#### 4. `hideBuildingAvatar()` - **–ü–†–û–°–¢–ê–Ø** ‚≠ê
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: `CONFIG.ROUTE_SCHEDULE`, `buildingAvatars`, `carRenderer`
- **–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑**: `nextDestination()`
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –°–†–ï–î–ù–ò–ô
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤–∞ –∫ –ø–µ—Ä–µ–Ω–æ—Å—É

#### 5. `checkArrival()` - **–°–õ–û–ñ–ù–ê–Ø** ‚≠ê‚≠ê‚≠ê
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: `CONFIG.ROUTE_SCHEDULE`, `carEntity`, `journalManager`, `saveCarStateForNextDestination()`, `uiRenderer`, `showBuildingAvatar()`
- **–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑**: `Game.update()` (—á–µ—Ä–µ–∑ `updateCar()`)
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –í–´–°–û–ö–ò–ô (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç saveCarStateForNextDestination)
- **–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ–Ω–æ—Å–∞ –∑–∞–≤–∏—Å–∏–º—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

#### 6. `nextDestination()` - **–û–ß–ï–ù–¨ –°–õ–û–ñ–ù–ê–Ø** ‚≠ê‚≠ê‚≠ê‚≠ê
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: `CONFIG.ROUTE_SCHEDULE`, `journalManager`, `hideBuildingAvatar()`, `uiRenderer`, `carEntity`, `pathBuilder`, `getDestinationCenter()`
- **–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑**: `updateStayTimer()`
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –í–´–°–û–ö–ò–ô (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö)
- **–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ–Ω–æ—Å–∞ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

### üü° –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–ø–µ—Ä–µ–Ω–æ—Å—è—Ç—Å—è –≤–æ –≤—Ç–æ—Ä—É—é –æ—á–µ—Ä–µ–¥—å)

#### 7. `getDestinationCenter(locationKey)` - **–ü–†–û–°–¢–ê–Ø** ‚≠ê
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: `CONFIG.ROUTE_SCHEDULE`
- **–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑**: `saveCarStateForNextDestination()`, `showBuildingAvatar()`
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –°–†–ï–î–ù–ò–ô
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤–∞ –∫ –ø–µ—Ä–µ–Ω–æ—Å—É

#### 8. `updateCar(delta)` - **–°–†–ï–î–ù–Ø–Ø** ‚≠ê‚≠ê
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: `updateEntities()`, `carEntity`, `carRenderer`, `uiRenderer`
- **–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑**: `Game.update()`
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –°–†–ï–î–ù–ò–ô
- **–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ–Ω–æ—Å–∞ updateEntities()

#### 9. `updateEntities(delta)` - **–ü–†–û–°–¢–ê–Ø** ‚≠ê
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: `carEntity`, `shinaEntity`
- **–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑**: `updateCar()`
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –°–†–ï–î–ù–ò–ô
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤–∞ –∫ –ø–µ—Ä–µ–Ω–æ—Å—É

### üü¢ –§—É–Ω–∫—Ü–∏–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (–ø–µ—Ä–µ–Ω–æ—Å—è—Ç—Å—è –≤ –ø–æ—Å–ª–µ–¥–Ω—é—é –æ—á–µ—Ä–µ–¥—å)

#### 10. `initEntities()` - **–°–†–ï–î–ù–Ø–Ø** ‚≠ê‚≠ê
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: `game.carEntity`, `game.shinaEntity`
- **–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑**: `main.js` (–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è)
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –ù–ò–ó–ö–ò–ô
- **–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ (—É–∂–µ —á–∞—Å—Ç–∏—á–Ω–æ –≤ Game.js)

#### 11. `setupWorld()` - **–°–õ–û–ñ–ù–ê–Ø** ‚≠ê‚≠ê‚≠ê
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- **–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑**: `main.js` (–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è)
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –ù–ò–ó–ö–ò–ô
- **–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

#### 12. `createCar()` - **–°–†–ï–î–ù–Ø–Ø** ‚≠ê‚≠ê
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: `CONFIG`, `carRenderer`, `pathBuilder`
- **–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑**: `main.js` (–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è)
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –ù–ò–ó–ö–ò–ô
- **–°—Ç–∞—Ç—É—Å**: ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

## üîÑ –ü–æ—Ä—è–¥–æ–∫ –ø–µ—Ä–µ–Ω–æ—Å–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π)

### –§–∞–∑–∞ 1: –ü—Ä–æ—Å—Ç—ã–µ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
1. `updateStayTimer()` ‚Üí `_updateStayTimer()`
2. `saveCarStateForNextDestination()` ‚Üí `_saveCarStateForNextDestination()`
3. `getDestinationCenter()` ‚Üí `_getDestinationCenter()`

### –§–∞–∑–∞ 2: –§—É–Ω–∫—Ü–∏–∏ –∞–≤–∞—Ç–∞—Ä–æ–∫
4. `showBuildingAvatar()` ‚Üí `_showBuildingAvatar()`
5. `hideBuildingAvatar()` ‚Üí `_hideBuildingAvatar()`

### –§–∞–∑–∞ 3: –°–ª–æ–∂–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
6. `checkArrival()` ‚Üí `_checkArrival()`
7. `nextDestination()` ‚Üí `_nextDestination()`

### –§–∞–∑–∞ 4: –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
8. `updateEntities()` ‚Üí `_updateEntities()`
9. `updateCar()` ‚Üí `_updateCar()`

### –§–∞–∑–∞ 5: –§—É–Ω–∫—Ü–∏–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
10. `initEntities()` ‚Üí `_initEntities()`
11. `setupWorld()` ‚Üí `_setupWorld()`
12. `createCar()` ‚Üí `_createCar()`

## üìã –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏—è–º–∏:
- `game` - —ç–∫–∑–µ–º–ø–ª—è—Ä Game (—É–∂–µ –¥–æ—Å—Ç—É–ø–µ–Ω –∫–∞–∫ `this`)
- `carEntity` - —Å—É—â–Ω–æ—Å—Ç—å –º–∞—à–∏–Ω—ã (—Å—Ç–∞–Ω–µ—Ç `this.carEntity`)
- `carRenderer` - —Ä–µ–Ω–¥–µ—Ä–µ—Ä –º–∞—à–∏–Ω—ã (—Å—Ç–∞–Ω–µ—Ç `this.carRenderer`)
- `uiRenderer` - —Ä–µ–Ω–¥–µ—Ä–µ—Ä UI (—Å—Ç–∞–Ω–µ—Ç `this.uiRenderer`)
- `journalManager` - –º–µ–Ω–µ–¥–∂–µ—Ä –∂—É—Ä–Ω–∞–ª–∞ (—Å—Ç–∞–Ω–µ—Ç `this.journalManager`)
- `pathBuilder` - –ø–æ—Å—Ç—Ä–æ–∏—Ç–µ–ª—å –ø—É—Ç–µ–π (—Å—Ç–∞–Ω–µ—Ç `this.pathBuilder`)
- `decorLayer` - —Å–ª–æ–π –¥–µ–∫–æ—Ä–∞—Ü–∏–π (—Å—Ç–∞–Ω–µ—Ç `this.decorLayer`)
- `zoneGeometry` - –≥–µ–æ–º–µ—Ç—Ä–∏—è –∑–æ–Ω (—Å—Ç–∞–Ω–µ—Ç `this.zoneGeometry`)
- `buildingAvatars` - –∫–∞—Ä—Ç–∞ –∞–≤–∞—Ç–∞—Ä–æ–∫ (—Å—Ç–∞–Ω–µ—Ç `this.buildingAvatars`)
- `currentRouteIndex` - —Ç–µ–∫—É—â–∏–π –∏–Ω–¥–µ–∫—Å –º–∞—Ä—à—Ä—É—Ç–∞ (—Å—Ç–∞–Ω–µ—Ç `this.currentRouteIndex`)
- `savedCarState` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–∞—à–∏–Ω—ã (—Å—Ç–∞–Ω–µ—Ç `this.savedCarState`)

### –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
- `CONFIG.ROUTE_SCHEDULE` - —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞
- `PIXI` - –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ PIXI.js

## ‚ö†Ô∏è –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

### üî¥ –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫
- **–¶–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** - `nextDestination()` –∏ `checkArrival()` –º–æ–≥—É—Ç —Å–æ–∑–¥–∞—Ç—å —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –≤—ã–∑–æ–≤—ã
  - *–ú–∏—Ç–∏–≥–∞—Ü–∏—è*: –¢—â–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –≤—ã–∑–æ–≤–æ–≤
- **–ü–æ—Ç–µ—Ä—è —Å–æ—Å—Ç–æ—è–Ω–∏—è** - –ø—Ä–∏ –ø–µ—Ä–µ–Ω–æ—Å–µ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ –∫–ª–∞—Å—Å
  - *–ú–∏—Ç–∏–≥–∞—Ü–∏—è*: –ü–æ—à–∞–≥–æ–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ

### üü° –°—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫
- **–°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏** - –ø—Ä–∏ –∑–∞–º–µ–Ω–µ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –Ω–∞ `this.`
  - *–ú–∏—Ç–∏–≥–∞—Ü–∏—è*: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ IDE —Å –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ–º, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### üü¢ –ù–∏–∑–∫–∏–π —Ä–∏—Å–∫
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–ª–æ—è –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏
  - *–ú–∏—Ç–∏–≥–∞—Ü–∏—è*: –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞
- –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ –º–µ—Ç–æ–¥—ã –∫–ª–∞—Å—Å–∞ Game
- –ù–µ—Ç —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ `this.`
- –ò–≥—Ä–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- main.js —É–ø—Ä–æ—â–µ–Ω –¥–æ —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è
- –ö–∞–∂–¥—É—é —Ñ—É–Ω–∫—Ü–∏—é –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å –ø–æ –æ–¥–Ω–æ–π
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –ø–µ—Ä–µ–Ω–æ—Å–∞
- –û–±–Ω–æ–≤–ª—è—Ç—å –≤—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–π –≤ `Game.update()`
- –£–¥–∞–ª—è—Ç—å –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ `main.js`
