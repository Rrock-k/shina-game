# –ö–∞—Ä—Ç–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

## üìä –ê–Ω–∞–ª–∏–∑ —Ñ—É–Ω–∫—Ü–∏–π —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

### üîç –§—É–Ω–∫—Ü–∏–∏ –≤ main.js (—Ç—Ä–µ–±—É—é—Ç –ø–µ—Ä–µ–Ω–æ—Å–∞ –≤ Game.js)

#### 1. `updateStayTimer()` - **–ü–†–û–°–¢–ê–Ø** (–Ω–µ–∑–∞–≤–∏—Å–∏–º–∞—è)
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: `game.timeManager`, `carEntity`
- **–í—ã–∑—ã–≤–∞–µ—Ç**: `nextDestination()`
- **–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑**: `game.app.ticker.add()` –≤ main.js
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–µ—Ä–µ–Ω–æ—Å–∞**: 1 (—Å–∞–º–∞—è –ø—Ä–æ—Å—Ç–∞—è)

#### 2. `saveCarStateForNextDestination()` - **–ü–†–û–°–¢–ê–Ø** (–Ω–µ–∑–∞–≤–∏—Å–∏–º–∞—è)
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: `carEntity`, `carRenderer`, `pathBuilder`, `CONFIG`
- **–í—ã–∑—ã–≤–∞–µ—Ç**: `pathBuilder.buildPathToBuilding()`
- **–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑**: `checkArrival()`
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–µ—Ä–µ–Ω–æ—Å–∞**: 2

#### 3. `showBuildingAvatar(locationKey)` - **–°–†–ï–î–ù–Ø–Ø** (–Ω–µ–∑–∞–≤–∏—Å–∏–º–∞—è)
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: `decorLayer`, `zoneGeometry`, `PIXI`
- **–í—ã–∑—ã–≤–∞–µ—Ç**: `getDestinationCenter()`
- **–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑**: `checkArrival()`
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–µ—Ä–µ–Ω–æ—Å–∞**: 3

#### 4. `hideBuildingAvatar()` - **–°–†–ï–î–ù–Ø–Ø** (–Ω–µ–∑–∞–≤–∏—Å–∏–º–∞—è)
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: `decorLayer`, `carRenderer`, `CONFIG`
- **–í—ã–∑—ã–≤–∞–µ—Ç**: `carRenderer.setAvatarVisible()`
- **–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑**: `nextDestination()`
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–µ—Ä–µ–Ω–æ—Å–∞**: 4

#### 5. `checkArrival()` - **–°–õ–û–ñ–ù–ê–Ø** (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –¥—Ä—É–≥–∏—Ö)
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: `carEntity`, `CONFIG`, `journalManager`, `uiRenderer`
- **–í—ã–∑—ã–≤–∞–µ—Ç**: `saveCarStateForNextDestination()`, `showBuildingAvatar()`
- **–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑**: `carEntity.onArrival` callback
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–µ—Ä–µ–Ω–æ—Å–∞**: 5

#### 6. `nextDestination()` - **–°–ê–ú–ê–Ø –°–õ–û–ñ–ù–ê–Ø** (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤—Å–µ—Ö)
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: `CONFIG`, `journalManager`, `uiRenderer`, `carEntity`, `pathBuilder`
- **–í—ã–∑—ã–≤–∞–µ—Ç**: `hideBuildingAvatar()`, `checkArrival()` (–∫–æ—Å–≤–µ–Ω–Ω–æ)
- **–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑**: `updateStayTimer()`
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–µ—Ä–µ–Ω–æ—Å–∞**: 6 (–ø–æ—Å–ª–µ–¥–Ω—è—è)

---

## üîÑ –ü–æ—Ä—è–¥–æ–∫ –ø–µ—Ä–µ–Ω–æ—Å–∞ —Ñ—É–Ω–∫—Ü–∏–π

### –≠—Ç–∞–ø 1: –ù–µ–∑–∞–≤–∏—Å–∏–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
1. `updateStayTimer()` ‚Üí `_updateStayTimer()`
2. `saveCarStateForNextDestination()` ‚Üí `_saveCarStateForNextDestination()`

### –≠—Ç–∞–ø 2: –§—É–Ω–∫—Ü–∏–∏ –∞–≤–∞—Ç–∞—Ä–æ–∫
3. `showBuildingAvatar()` ‚Üí `_showBuildingAvatar()`
4. `hideBuildingAvatar()` ‚Üí `_hideBuildingAvatar()`

### –≠—Ç–∞–ø 3: –ó–∞–≤–∏—Å–∏–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
5. `checkArrival()` ‚Üí `_checkArrival()`
6. `nextDestination()` ‚Üí `_nextDestination()`

---

## üß™ –ü–ª–∞–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –î–ª—è –∫–∞–∂–¥–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–Ω–æ—Å–∞:
1. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –î–æ–±–∞–≤–∏—Ç—å `console.log('Function called')` –≤ –Ω–∞—á–∞–ª–æ
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–∑–æ–≤–æ–≤**: –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞**: –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**: –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ `this.` –æ–±—Ä–∞—â–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã:
1. **–¢–∞–π–º–µ—Ä—ã**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `updateStayTimer` —Ä–∞–±–æ—Ç–∞–µ—Ç
2. **–ê–≤–∞—Ç–∞—Ä–∫–∏**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∞–≤–∞—Ç–∞—Ä–∫–∏ –∑–¥–∞–Ω–∏–π –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è/—Å–∫—Ä—ã–≤–∞—é—Ç—Å—è
3. **–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É –ª–æ–∫–∞—Ü–∏—è–º–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
4. **–ü—Ä–∏–±—ã—Ç–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø—Ä–∏–±—ã—Ç–∏–µ –≤ –ª–æ–∫–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## ‚ö†Ô∏è –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

### –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫:
- **–ù–∞—Ä—É—à–µ–Ω–∏–µ —Ü–µ–ø–æ—á–∫–∏ –≤—ã–∑–æ–≤–æ–≤** –ø—Ä–∏ –ø–µ—Ä–µ–Ω–æ—Å–µ `nextDestination`
  - *–ú–∏—Ç–∏–≥–∞—Ü–∏—è*: –ü–µ—Ä–µ–Ω–æ—Å–∏—Ç—å –≤ –ø–æ—Å–ª–µ–¥–Ω—é—é –æ—á–µ—Ä–µ–¥—å, —Ç—â–∞—Ç–µ–ª—å–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### –°—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫:
- **–ü–æ—Ç–µ—Ä—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞** –ø—Ä–∏ –∑–∞–º–µ–Ω–µ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –Ω–∞ `this.`
  - *–ú–∏—Ç–∏–≥–∞—Ü–∏—è*: –ü—Ä–æ–≤–µ—Ä—è—Ç—å –∫–∞–∂–¥—É—é –∑–∞–º–µ–Ω—É –æ—Ç–¥–µ–ª—å–Ω–æ

### –ù–∏–∑–∫–∏–π —Ä–∏—Å–∫:
- **–°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏** –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–π
  - *–ú–∏—Ç–∏–≥–∞—Ü–∏—è*: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å IDE —Å –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ–º

---

## üìù –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–µ—Ä–µ–Ω–æ—Å–∞

- [ ] –§—É–Ω–∫—Ü–∏—è —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≤ Game.js
- [ ] –í—Å–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ `this.`
- [ ] –í—ã–∑–æ–≤—ã –¥—Ä—É–≥–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π –æ–±–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞ `this._methodName()`
- [ ] –§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ Game.update() (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
- [ ] –í—ã–∑–æ–≤—ã –≤ main.js –æ–±–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞ `game._methodName()`
- [ ] –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –°—Ç–∞—Ä–∞—è —Ñ—É–Ω–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∞ –∏–∑ main.js
